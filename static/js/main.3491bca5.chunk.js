(this["webpackJsonpantd-table-test-task"]=this["webpackJsonpantd-table-test-task"]||[]).push([[0],{155:function(e,t,n){},231:function(e,t,n){},232:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(26),o=n.n(c),i=(n(155),n(234)),s=n(148),l=n(69),u=n(37),d=n(29),j=n(236),b=n(82),O=n(46),f=n(239),x=n(80),m=n(35),p=Object(a.createContext)({}),h=function(e){var t=Object(a.useContext)(p),n=Object(d.a)(t,1)[0];if(!e)throw new Error("useMethods: scope is required");return[Object(a.useCallback)((function(t){var a=n[e][t];if(a)return a;throw new Error("useMethods: Method ".concat(t," in scope ").concat(e," is not exists"))}),[e,n]),Object(a.useCallback)((function(t){var a=n[e][t];if(a){for(var r=arguments.length,c=new Array(r>1?r-1:0),o=1;o<r;o++)c[o-1]=arguments[o];return a.apply(void 0,c)}throw new Error("useMethods: Method ".concat(t," in scope ").concat(e," is not exists"))}),[e,n])]},v=n(16),k=function(e){var t=e.loading,n=e.toolbarData,a=void 0===n?[]:n,r=h("table"),c=Object(d.a)(r,1)[0];return Object(v.jsx)(j.a,{children:Object(v.jsx)(b.a,{gutter:[8,0],align:"middle",children:t?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(O.a,{flex:"row",children:Object(v.jsx)(f.a.Button,{})}),Object(v.jsx)(O.a,{flex:"row",children:Object(v.jsx)(f.a.Button,{})}),Object(v.jsx)(O.a,{flex:"row",children:Object(v.jsx)(f.a.Button,{})})]}):a.map((function(e){var t=e.id,n=e.operationDescription,a=e.operationCaption,r=e.operationOrd,o=e.operationMethod;return Object(v.jsx)(O.a,{flex:"row",order:r,children:Object(v.jsx)(x.a,{title:n,children:Object(v.jsx)(m.a,{onClick:c(o),type:"primary",children:a})})},"toolbar_button_".concat(t))}))})})},g=Object(a.memo)(k),y=n(240),w=n(235),C=n(238),N=n(237),D=C.a.TextArea,M=function(e){var t=e.modalData,n=e.recordKey,r=e.columnsObj,c=Object(a.useMemo)((function(){return Object.keys(t)}),[t]);return Object(v.jsx)(N.a,{style:{marginTop:"32px"},layout:"horizontal",labelCol:{span:10},children:Object(v.jsx)(b.a,{gutter:[8,8],children:c.map((function(e,a){return Object(v.jsx)(O.a,{span:12,children:Object(v.jsx)(N.a.Item,{name:e,label:r[e],initialValue:t[e],children:Object(v.jsx)(D,{disabled:!0,autoSize:{minRows:1}})},"modal_".concat(n,"_").concat(a))},"modal_".concat(n,"_").concat(a))}))})})},E=Object(a.memo)(M),P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Object(a.useContext)(p),c=Object(d.a)(r,2),o=c[0],i=c[1],s=Object(a.useRef)({});if(!e)throw new Error("useMethodRegistration: scope is required");var j=Object(a.useCallback)((function(){var t=Object(u.a)({},o);delete t[e],i(t)}),[o,e]);return Object(a.useEffect)((function(){if(t!==s.current&&(i(Object(u.a)(Object(u.a)({},o),{},Object(l.a)({},e,Object(u.a)({},t)))),s.current=t,n))return function(){return j()}}),[t]),j},S=n(122),I=n.n(S),L=n(67),_=n(138),B=function(e){return{data:e||null,error:null,fetch:!0}},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(a.useState)(!0),r=Object(d.a)(n,2),c=r[0],o=r[1],i=Object(a.useState)(e.map((function(e,n){return B(t[n])}))),s=Object(d.a)(i,2),l=s[0],j=s[1];Object(a.useEffect)(Object(_.a)(I.a.mark((function n(){var a,r,c,i;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!l.length||!e.length){n.next=11;break}if(a=[],!(r=e.reduce((function(e,t,n){return l[n].fetch?(a.push(n),[].concat(Object(L.a)(e),[t()])):e}),[])).length){n.next=10;break}return n.next=6,Promise.allSettled(r);case 6:c=n.sent,i=Object(L.a)(l),c.forEach((function(e,n){var r=i[a[n]];r.fetch=!1,"rejected"===e.status?(r.data=t[a[n]]||null,r.error=e.error):(r.data=e.value,r.error=null)})),j(i);case 10:o(!1);case 11:case"end":return n.stop()}}),n)}))),[l]);var b=function(e){return function(){var t=Object(L.a)(l);t[e].fetch=!0,j(t),o(!0)}},O=Object(a.useCallback)((function(){var e=l.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{fetch:!0})}));j(e),o(!0)}),[l]),f=Object(a.useMemo)((function(){return l.map((function(e,t){return{data:e.data,error:e.error,refetch:b(t)}}))}),[l]);return[c,O].concat(Object(L.a)(f))},F=[{key:"1",firstName:"John",lastName:"Brown",sex:"male",address:"New York No. 1 Lake Park",age:32},{key:"2",firstName:"Joan",lastName:"Green",sex:"female",address:"London No. 1 Lake Park",age:42},{key:"3",firstName:"Bob",lastName:"Yellow",sex:"male",address:"Sidney No. 1 Lake Park",age:36}],R={columns:[{title:"First name",dataIndex:"firstName",key:"firstName"},{title:"Last name",dataIndex:"lastName",key:"lastName"},{title:"Sex",dataIndex:"sex",key:"sex"},{title:"Age",dataIndex:"age",key:"age"},{title:"Address",dataIndex:"address",key:"address"}],contextOperations:[{ord:1,name:"open",caption:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c",method:"editObject"},{ord:2,name:"exportData",caption:"\u0412 Excel",method:"exportData"}],toolbar:[{operationOrd:2,operationName:"refreshPage",operationCaption:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c",operationDescription:"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b",operationMethod:"refreshPage",id:164},{operationOrd:3,operationName:"exportData",operationCaption:"\u0412 Excel",operationDescription:"\u0412 Excel",operationMethod:"exportData",id:165}],dblClickOperation:{name:"open",method:"editObject"}};function A(){return new Promise((function(e){setTimeout((function(){e(R)}),1e3)}))}function J(){return new Promise((function(e){setTimeout((function(){e(F)}),1e3)}))}var Y=function(e){var t=e.visible,n=e.x,a=e.y,r=e.menuData,c=e.args,o=h("table"),i=Object(d.a)(o,2)[1];return t&&Object(v.jsx)("div",{className:"popup",style:{left:"".concat(n,"px"),top:"".concat(a,"px")},children:Object(v.jsx)(b.a,{children:r.map((function(e){var t=e.ord,n=e.name,a=e.caption,r=e.method;return Object(v.jsx)(O.a,{span:24,order:t,children:Object(v.jsx)(m.a,{block:!0,onClick:function(){return i.apply(void 0,[r].concat(Object(L.a)(c)))},type:"text",children:a})},"context_menu_".concat(n))}))})})},q=Object(a.memo)(Y),z=["key"],K=function(){var e=T([A,J],[{},[]]),t=Object(d.a)(e,4),n=t[0],r=t[1],c=t[2],o=t[3],i=c.data,j=i.columns,f=i.toolbar,x=i.contextOperations,m=i.dblClickOperation,p=Object(a.useMemo)((function(){return j&&j.reduce((function(e,t){var n=t.dataIndex,a=t.title;return Object(u.a)(Object(u.a)({},e),{},Object(l.a)({},n,a))}),{})}),[j]),k=Object(a.useCallback)((function(e,t){y.a.confirm({title:"Record Info",centered:!0,closable:!0,width:500,icon:null,content:Object(v.jsx)(E,{modalData:e,recordKey:t,columnsObj:p})})}),[p]),C=Object(a.useCallback)((function(){return console.log(o.data)}),[o]),N=Object(a.useState)({visible:!1,args:[],x:0,y:0}),D=Object(d.a)(N,2),M=D[0],S=D[1],I=Object(a.useMemo)((function(){return{editObject:k,refreshPage:r,exportData:C}}),[k]);P("table",I);var L=h("table"),_=Object(d.a)(L,2)[1];return Object(v.jsxs)(b.a,{style:{marginTop:"16px"},justify:"center",children:[Object(v.jsx)(q,Object(u.a)({menuData:x},M)),Object(v.jsx)(O.a,{xl:12,md:14,xs:23,children:Object(v.jsxs)(b.a,{gutter:[0,16],children:[Object(v.jsx)(O.a,{span:24,children:Object(v.jsx)(g,{loading:n,toolbarData:f})}),Object(v.jsx)(O.a,{span:24,children:Object(v.jsx)(w.a,{loading:n,dataSource:o.data,columns:j,onRow:function(e){var t=e.key,n=Object(s.a)(e,z);return{onDoubleClick:function(){return m&&_(m.method,n,t)},onContextMenu:function(e){e.preventDefault(),document.addEventListener("click",(function e(){S(Object(u.a)(Object(u.a)({},M),{},{visible:!1})),document.removeEventListener("click",e)})),S({visible:!0,args:[n,t],x:e.clientX,y:e.clientY})}}}})})]})})]})},G=Object(a.memo)(K),V=(n(231),i.a.Content);var X=function(){return Object(v.jsx)(i.a,{children:Object(v.jsx)(V,{className:"main-content",children:Object(v.jsx)(G,{})})})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,241)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))},Q=function(e){var t=e.initMethods,n=void 0===t?{}:t,r=e.children,c=Object(a.useState)(n),o=Object(d.a)(c,2),i=o[0],s=o[1];return Object(v.jsx)(p.Provider,{value:[i,s],children:r})},U=Object(a.memo)(Q);o.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(U,{children:Object(v.jsx)(X,{})})}),document.getElementById("root")),H()}},[[232,1,2]]]);
//# sourceMappingURL=main.3491bca5.chunk.js.map